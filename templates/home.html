{% extends "base.html" %}
{% block content %}
    
<h1 class="sr-only">Home - search screen</h1>
<h2>discover world's most popular coins</h2>
<!-- search bar -->
<form class="col-8 offset-2 mr-auto mb-4 form-inline md-form bg-dark" action="{{ url_for('search') }}" method="POST">
    <input class="col-8 mx-sm-5 form-control amber-text " type="text" name="query" id="query" minlenght="3" placeholder="Search" required aria-label="Search">
    <button class="btn btn-elegant btn-rounded btn-sm my-0" type="submit" id="search_button">Search</button>
</form>

<!-- search results for last 6 coins -->
<div class="card-deck" id="search">
    {% for coin in coins %}
        {% if loop.index0 < 6 %} 
        <div class="col-md-6 col-lg-4">
            <div class="card mb-4 black">
                <div class="avatar mx-auto black" style="height: 15rem;">
                    <img class="my-lg-auto rounded-circle" style="width: 15rem;" src="{{ coin.image }}" alt="{{ coin.name }}">
                </div>
                <div class="card-body white">
                    <h4 class="card-title">{{ coin.description }}</h4>
                    <hr>
                    <div class="card-text mb-4"><i class="fas fa-coins fa-2x black-text"></i> {{ loop.index0 }} If you don't have an account please
                        <a href="{{ url_for('register') }}">Register</a> today.
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    {% endfor %}
</div>

<!-- Welcome screen if not log in -->
<!-- Template used below from: https://mdbootstrap.com/snippets/jquery/marta-szymanska/1359506#html-tab-view -->
<div class="row elegant-color text-white rounded no-gutters p-3 mb-4">
    <!-- user counter -->
    <div class="col-md-4">
        <div class="row">
            <div class="col-6 pr-0">
                {% for user in user_list %}
                    {% if loop.last %}
                    <h4 class="display-4 text-right mb-0 count-up" data-from="0" data-to="{{ loop.index }}" data-time="1000">{{ loop.index }}</h4>
                    {% endif %}
                {% endfor %}
            </div>
            <div class="col-6">
                <p class="text-uppercase font-weight-normal mb-1">Users</p>
                <p class="mb-0 pl-3"><i class="fas fa-user fa-2x amber-text mb-0"></i></p>
            </div>
        </div>
    </div>
    <!-- coins counter -->
    <div class="col-md-4">
        <div class="row">
            <div class="col-6 pr-0">
                {% for coin in coins_list %}
                    {% if loop.last %}
                    <h4 class="display-4 text-right mb-0 count1" data-from="0" data-to="{{ loop.index }}" data-time="1000">{{ loop.index }}</h4>
                    {% endif %}
                {% endfor %}
            </div>
            <div class="col-6">
                <p class="text-uppercase font-weight-normal mb-1">Coins</p>
                <p class="mb-0 pl-2"><i class="fas fa-coins fa-2x amber-text mb-0"></i></p>
            </div>
        </div>
    </div>
    <!-- satisfaction counter -->
    <div class="col-md-4">
        <div class="row">
            <div class="col-6 pr-0">
                <h4 class="display-4 text-right"><span class="d-flex justify-content-end">
                    <span class="count2" data-from="0" data-to="100" data-time="1000">0</span> %
                </span></h4>
            </div>
            <div class="col-6">
                <p class="text-uppercase font-weight-normal mb-1">Satisfaction</p>
                <p class="mb-0 pl-5"><i class="fas fa-smile fa-2x amber-text mb-0"></i></p>
            </div>
        </div>
    </div>
</div>

<!-- Welcome screen if not log in -->
<!-- Template used below from: https://mdbootstrap.com/snippets/jquery/marta-szymanska/1359506#html-tab-view -->
{% if 'user_email' not in session:%}
<div class="container elegant-color text-white text-center rounded mb-4">
    <h3 class="font-weight-bold amber-text py-3">Join our community today!</h3>
    <p class="w-responsive mx-auto mb-2">If you don't have an account please<a href="{{ url_for('register') }}"> Register</a> here.</p>
    <h4 class="amber-text py-3">Latest coins:</h4>
    
    
    <div class="row">
    {% for coin in coins_list %}
        {% if loop.revindex0 < 3 %} 
        <div class="col-md-6 col-lg-4">
            <div class="card mb-4 black view overlay z-depth-1">
                <div class="avatar mx-auto black" style="height: 15rem;">
                    <img class="my-lg-auto rounded-circle" style="width: 15rem;" src="{{ coin.image }}" alt="{{ coin.name }}">
                </div>
                 <div class="mask flex-center rgba-orange-light">
                    <a class="btn btn-info btn-rounded" href="{{ url_for('register') }}">To see more please Register here</a>
                </div>
                <div class="card-body white">
                    <h4 class="card-title black-text">{{ coin.description }}</h4>
                    <hr class="my-0">
                </div>
            </div>
        </div>
        {% endif %}
    {% endfor %}
    </div>
</div>
{% endif %}
{% endblock %}