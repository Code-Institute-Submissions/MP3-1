{% extends "base.html" %}
{% block content %}

<h1 class="sr-only">Profile</h1>
<!-- loop in a user table to match user email and session cookie -->
{% for data in users %}
    {% if data.email == user_email %}
        <div class="row no-gutters">
            <!-- Card from: https://mdbootstrap.com/docs/b4/jquery/forms/inputs/-->
            <div class="card col-sm-12 col-lg-10 offset-lg-1">
                <div>
                    <img class="card-img-top" src="../static/images/unsplash-simon-zRxLgc-o56I.jpg" alt="Profile image">
                </div>
                <div class="card-body elegant-color amber-text text-center p-left pb-0">
                    <!-- title -->
                    <h4 class="card-title text-uppercase">Your profile details</h4>
                    <hr class="hr-light">
                    <!-- first name -->
                    <div class="row my-3">
                        <div class="col">
                            <p class="col-form-label text-right"><i class="fas fa-user-tie mx-3"></i>First name:</p>
                        </div>
                        <div class="col">
                            <p class="col-form-label text-left ml-sm-4">{{ data.first_name.capitalize() }}</p>
                        </div>
                    </div>
                    <!-- last name -->
                    <div class="row my-3">
                        <div class="col">
                            <p class="col-form-label text-right"><i class="fas fa-user-tie mx-3"></i>Last name:</p>
                        </div>
                        <div class="col">
                            <p class="col-form-label text-left ml-sm-4">{{ data.last_name.capitalize() }}</p>
                        </div>
                    </div>
                    <!-- email -->
                    <div class="row my-3">
                        <div class="col">
                            <p class="col-form-label text-right"><i class="fas fa-envelope mx-2"></i>Email adderss:</p>
                        </div>
                        <div class="col">
                            <p class="col-form-label text-left ml-sm-4">{{ data.email }}</p>
                        </div>
                    </div>
                </div>
                <div class="card-body elegant-color amber-text text-center rounded-bottom pt-0">
                    <!-- user coins -->
                    <div>
                        <hr class="hr-light mt-4">
                        <h4 class="card-title text-uppercase">Your coins:</h4>
                        <a href="{{ url_for('new_coin') }}" class="btn btn-grey mt-0 mx-0">Add New Coin</a>
                        
                        <button type="button" class="btn btn-grey mt-0 mx-0" id="show_coins">Show coins</button>
                        <hr class="hr-light">
                        <div class="card-deck no-gutters" id="user_coins">
                            {% for coin in coins %}
                            {% if (session.user_email|lower == coin.created_by|lower) %}
                                <div class="col-md-6">
                                    <div class="card mb-4 black">
                                        <div class="avatar mx-auto black" style="height: 15rem">
                                            <img class="my-lg-auto rounded-circle" style="width: 15rem" src="{{ coin.image }}" alt="{{ coin.name }}">
                                        </div>
                                        <div class="card-body grey darken-4">
                                            <h4 class="card-title" style="height:4rem">{{ coin.description }}</h4>
                                            <hr>
                                            <div class="row mx-2 mb-3">
                                                <div class="col btn-group px-0 mx-0" role="group" aria-label="edit and delete buttons">
                                                    <a href="{{ url_for('edit_coin', id=coin._id) }}" class="col btn btn-mdb-color mt-0 mx-0">Edit</a>
                                                    <button type="button" class="col btn btn-blue-grey mt-0 mx-0" data-toggle="modal" data-target="#modal{{coin._id}}">Delete</button>
                                                    <div class="modal modal-notify fade mt-5" id="modal{{coin._id}}" tabindex="-1" role="dialog" aria-labelledby="delete-modal" aria-hidden="true">
                                                        <div class="modal-dialog modal-sm modal-notify modal-info mt-5" role="document">
                                                            <div class="modal-content bg-light text-center">
                                                                <div class="modal-header justify-content-center">
                                                                    <p class="heading">Do you realy want to delete?</p>
                                                                </div>
                                                                <div class="mt-3 justify-content-center">
                                                                    <p class="heading text-dark"> {{ coin.description }} </p>
                                                                </div>
                                                                <div class="modal-body">
                                                                    <i class="fas fa-times fa-4x animated rotateIn blue-grey-text"></i>
                                                                </div>
                                                                <div class="modal-footer flex-center">
                                                                    <a href="{{ url_for('delete_coin', id=coin._id) }}" class="btn btn-outline-blue-grey bg-primary text-warning waves-effect">Yes</a>
                                                                    <a type="button" class="btn btn btn-blue-grey waves-effect" data-dismiss="modal">No</a>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
{% endfor %}
{% endblock %}